# Chapter 09 ì „ë¬¸ ê²€ìƒ‰ê¸°ìˆ  ë„ì „ - ëŒ€ê·œëª¨ ë°ì´í„° ì²˜ë¦¬ì˜ ë…¸í•˜ìš°---## ê°•ì˜ 26. ê²€ìƒ‰ì—”ì§„ì˜ ë‚´ë¶€êµ¬ì¡°### ì—­ ì¸ë±ìŠ¤ì˜ êµ¬ì¡° - Dictonary + Postings![ì—­ ì¸ë±ìŠ¤ì˜ ì˜ˆ](image/example_inverted_index.png)- ì˜ˆë¥¼ ë“¤ì–´, "í•˜í…Œë‚˜"ë¼ëŠ” ë‹¨ì–´ë¥¼ ê²€ìƒ‰í•˜ë©´ postings ë¦¬ìŠ¤íŠ¸ `[1, 3, 4]`ì„ í†µí•´ í•´ë‹¹ ë‹¨ì–´ë¥¼ í¬í•¨í•˜ëŠ” ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.- ì´ì™€ ê°™ì€ **term â†’ ë¬¸ì„œ**ì˜ ë§¤í•‘ êµ¬ì¡°ë¥¼ **ì—­ì¸ë±ìŠ¤(Inverted Index)**ë¼ê³  í•©ë‹ˆë‹¤.- ì—­ì¸ë±ìŠ¤ëŠ” ê²€ìƒ‰ ì—”ì§„ì—ì„œ **ë¹ ë¥´ê²Œ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì°¾ì•„ì£¼ëŠ” í•µì‹¬ ë°ì´í„° êµ¬ì¡°**ì…ë‹ˆë‹¤.#### ìš©ì–´ ì •ë¦¬- **Term**: ë¬¸ì„œì—ì„œ ì¶”ì¶œí•œ ë‹¨ì–´ (í˜•íƒœì†Œ ë¶„ì„ì´ë‚˜ ì „ì²˜ë¦¬ë¥¼ í†µí•´ ìƒì„±)- **Dictionary**: ëª¨ë“  termì˜ ì§‘í•©- **Postings**: ê° termì´ ë‚˜íƒ€ë‚˜ëŠ” ë¬¸ì„œ IDì˜ ëª©ë¡> #### ìš”ì•½> ì—­ì¸ë±ìŠ¤ = **Dictionary + Postings**> - ë‹¨ì–´ ì¤‘ì‹¬ìœ¼ë¡œ ë¬¸ì„œë¥¼ ì—­ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±ëœ ê²€ìƒ‰ ì¸í”„ë¼ì˜ í•µì‹¬ êµ¬ì¡°> - ë‹¨ì–´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì–´ë–¤ ë¬¸ì„œì— í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ ì¦‰ì‹œ í™•ì¸ ê°€ëŠ¥### Dictionary ë§Œë“œëŠ” ë²• - ì—­ ì¸ë±ìŠ¤ ì‘ì„±ë²•#### 1. ì‚¬ì „ê³¼ ACë²•ì„ ì´ìš©í•˜ëŠ” ë°©ë²•ì‚¬ì „ì´ ê³§ ê²€ìƒ‰ ì‹œìŠ¤í…œì˜ ë‹¨ì–´ê³µê°„ì´ ëœë‹¤. ì¦‰, ì‚¬ì „ì— ë“¤ì–´ ìˆëŠ” ë‹¨ì–´ë§Œ ê²€ìƒ‰í•  ìˆ˜ ìˆë‹¤.   ì´ ì‚¬ì „ìœ¼ë¡œëŠ” ë¬´ì—‡ì„ ì‚¬ìš©í• ì§€ì— ë”°ë¼ ë‹¬ë¼ì§€ëŠ”ë° ì˜ˆë¥¼ ë“¤ë©´ í•˜í…Œë‚˜ í‚¤ì›Œë“œì˜ 27ë§Œ ë‹¨ì–´ê°€ ê²€ìƒ‰ ê°€ëŠ¥í•œ ê²€ìƒ‰ì—”ì§„ì´ ëœë‹¤.   ë˜ëŠ” Wikipediaê°€ ë°°í¬í•˜ê³  ìˆëŠ” ë°ì´í„°ë¥¼ ì‚¬ìš©í•´ì„œ í‘œì œì–´ë§Œì„ ì‚¬ìš©í•˜ì—¬ ê²€ìƒ‰í•  ìˆ˜ ìˆë„ë¡ í•  ìˆ˜ ë„ ìˆë‹¤.#### 2. í˜•íƒœì†Œ ë¶„ì„ì„ ì´ìš©í•˜ëŠ” ë°©ë²•(í˜•íƒœì†Œë¥¼ ë‹¨ì–´ë¡œ ê°„ì£¼í•´ì„œ termìœ¼ë¡œ í•œë‹¤)í˜•íƒœì†Œ ë¶„ì„ê¸°ëŠ” ì‹¤ì œë¡œ ë¬´ìŠ¨ ê¸°ëŠ¥ì„ í•˜ëŠ” ê²ƒì¼ê¹Œ?   ê°€ì¥ ìš”êµ¬ë˜ëŠ” ê²ƒì€ 'ìœ í˜•íŒŒì•…ê³¼ ë¶„ë¦¬' ê¸°ëŠ¥ì´ë‹¤. ì´ ì›ë¦¬ì— ë”°ë¼ ì„¸ì„¸í•˜ê²Œ ë‚˜ëˆˆ ê° ë‹¨ì–´ë¥¼ 'í˜•íƒœì†Œ'ë¼ê³  í•œë‹¤.   'ìœ í˜•íŒŒì•…ê³¼ ë¶„ë¦¬'ì— ì˜í•´ í…ìŠ¤íŠ¸ë¥¼ í˜•íƒœì†Œë¡œ ë¶„í• í•˜ëŠ” ê²ƒì´ í˜•íƒœì†Œ ë¶„ì„ê¸°ì˜ ì£¼ëœ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜ë‹¤.> - ã™ã‚‚ã‚‚ã‚‚ã‚‚ã‚‚ã‚‚ã‚‚ã‚‚ã®ã†ã¡>   - ã™ã‚‚ã‚‚ ëª…ì‚¬>   - ã‚‚ ì¡°ì‚¬>   - ã‚‚ã‚‚ ëª…ì‚¬>   - ã‚‚ ì¡°ì‚¬>   - ã‚‚ã‚‚ ëª…ì‚¬>   - ã® ì¡°ì‚¬>   - ã†ã¡ ëª…ì‚¬ìœ„ì™€ ê°™ì´ í˜•íƒœì†Œ ë¶„ì„ê¸°ëŠ” ë¬¸ì”ì„ í˜•íƒœì†Œë¡œ ë‚˜ëˆ ì„œ ê·¸ í’ˆì‚¬ë¥¼ ì¶”ì •í•œë‹¤.   í’ˆì‚¬ë¥¼ ì–´ë–»ê²Œ ì¶”ì •í•˜ëŠëƒëŠ” êµ¬í˜„ì— ë”°ë¼ì„œë„ ë‹¬ë¼ì§€ì§€ë§Œ ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ì—ëŠ” ë‚´ë¶€ì— í˜•íƒœì†Œ ë¶„ì„ìš© ì‚¬ì „ì„ ê°€ì§€ê³  ìˆì–´ ê·¸ê²ƒì„ í† ëŒ€ë¡œ íŒë³„í•œë‹¤.ë‹¨ì–´ê°€ ëª…ì‚¬ì¸ì§€ ì•„ë‹Œì§€ëŠ” ì‚¬ì „ë§Œìœ¼ë¡œëŠ” ì•Œ ìˆ˜ ì—†ì§€ë§Œ, **ë‹¨ì–´ì˜ ë°°ì—´(ë¬¸ë§¥)**ì„ í†µí•´ ì–´ëŠ ì •ë„ ì˜ˆì¸¡ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ê·œì¹™ì„ ê¸°ê³„í•™ìŠµ ëª¨ë¸ì´ í•™ìŠµí•˜ê²Œ ë©ë‹ˆë‹¤:- â€œ**ëª…ì‚¬ ë‹¤ìŒì—ëŠ” ì¡°ì‚¬ê°€ ì˜¨ë‹¤**â€- â€œ**ì¡°ì‚¬ì™€ ë™ì‚¬ ì‚¬ì´ì— í¬í•¨ë˜ì–´ ìˆëŠ” ê²ƒì€ ëª…ì‚¬ì¼ ìˆ˜ ìˆë‹¤**â€ì´ëŸ¬í•œ ê·œì¹™ì„ ë°”íƒ•ìœ¼ë¡œ ëª¨ë¸ì€ ê¸´ í…ìŠ¤íŠ¸ ë‚´ì—ì„œ íŠ¹ì • ë‹¨ì–´ê°€ ëª…ì‚¬ì¸ì§€ ë™ì‚¬ì¸ì§€, ë˜ëŠ” ì–´ëŠ ì •ë„ ê¸¸ì´ì˜ ëª…ì‚¬ì¸ì§€ ë“±ì„ íŒë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.##### ì˜ˆì‹œ: â€˜ã™ã‚‚ã‚‚ã‚‚ã‚‚ã‚‚ã‚‚ã‚‚ã‚‚ã®ã†ã¡â€™| ë‹¨ì–´                | í’ˆì‚¬       ||---------------------|------------|| ã™ã‚‚ã‚‚ã‚‚ã‚‚ã‚‚ã‚‚ã‚‚ã‚‚ | ëª…ì‚¬ (ë§Œí™”) || ã‚‚ã‚‚               | ëª…ì‚¬       || ã®                 | ì¡°ì‚¬       || ã†ã¡               | ëª…ì‚¬       |- ì²« ë²ˆì§¸ `ã™ã‚‚ã‚‚ã‚‚ã‚‚ã‚‚ã‚‚ã‚‚ã‚‚`ëŠ” ë¶„ì„ê¸°ì— ë”°ë¼ í•˜ë‚˜ì˜ ëª…ì‚¬ë¡œ íŒë‹¨ë˜ë©°, ê·¸ ë’¤ì˜ `ã‚‚ã‚‚`, `ã®`, `ã†ã¡`ë„ ê°ê¸° ëª…ì‚¬ì™€ ì¡°ì‚¬ë¡œ ë¶„ë¦¬ë©ë‹ˆë‹¤.#### ê²€ìƒ‰ëˆ„ë½í˜•íƒœì†Œ ë¶„ì„ì— ëŒ€í•œ ì„¤ëª…ì„ ë§ˆì¹œ ë’¤, ë‹¤ì‹œ Dictionary ë°©ì‹ì˜ ê²€ìƒ‰ êµ¬ì¡°ë¡œ ëŒì•„ì˜¤ë©´  **ë‹¨ì–´ë¥¼ term ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ ì¸ë±ì‹±**í•˜ëŠ” ê²½ìš°, ë•Œë•Œë¡œ **ê²€ìƒ‰ ëˆ„ë½ ë¬¸ì œ**ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.> **ğŸ® ì˜ˆì‹œ: 'Gears of War' ê²€ìƒ‰ ë¬¸ì œ**ê²Œì„ íƒ€ì´í‹€ **"Gears of War"** ì— ëŒ€í•´ ë°œë§¤ì¼ ì •ë³´ë¥¼ ê²€ìƒ‰í•˜ë ¤ í•  ë•Œ:- **"Gears ë°œë§¤ì¼"**ë¡œ ê²€ìƒ‰í•˜ë©´ Metal Gear ê´€ë ¨ ê²°ê³¼ê°€ ë‚˜ì˜¤ëŠ” ê²½ìš°ê°€ ìˆë‹¤.- ë°˜ë©´ **"Gears of War ë°œë§¤ì¼"**ì€ ì •í™•íˆ ì›í•˜ëŠ” ë¬¸ì„œë¥¼ ì°¾ì•„ì¤€ë‹¤.#### ì´ìœ :- ê²€ìƒ‰ì—”ì§„ì€ `'Gears of War'`ë¥¼ **í•˜ë‚˜ì˜ termìœ¼ë¡œ ë“±ë¡**í•´ë‘ì—ˆê³ ,- `"Gear"`ëŠ” ë³„ë„ì˜ termìœ¼ë¡œ ì¸ë±ì‹±ë˜ì–´ ìˆì§€ ì•Šë‹¤.- ë”°ë¼ì„œ `"Gear"` í‚¤ì›Œë“œë¡œëŠ” `'Gears of War'`ë¥¼ í¬í•¨í•œ ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒâ†’ **ë¶€ë¶„ ë‹¨ì–´ í¬í•¨ ì—¬ë¶€**ê°€ ì¸ë±ìŠ¤ ë‹¨ìœ„(term ë¶„ë¦¬ ë°©ì‹)ì— ë”°ë¼ ëˆ„ë½ë  ìˆ˜ ìˆìŒ> **ì–¸ì–´ í™œìš© í˜•íƒœì— ë”°ë¥¸ ë¬¸ì œ**#### ì¼ë³¸ì–´ ë° ì˜ì–´ ê³µí†µ ë¬¸ì œ:- **í™œìš©í˜•(ë³€í˜•ëœ ë‹¨ì–´)** ê°€ ë‹¤ì–‘í•˜ê²Œ ì¡´ì¬í•¨    ì˜ˆ:    - ì¼ë³¸ì–´: `é£Ÿã¹ã‚‹ â†’ é£Ÿã¹ãŸ, é£Ÿã¹ãªã„, é£Ÿã¹ã‚ˆã†`    - ì˜ì–´: `run â†’ running, ran, runs`â†’ ì´ ê²½ìš°, ì›í˜•ì„ ê¸°ì¤€ìœ¼ë¡œ ê²€ìƒ‰í•˜ë ¤ë©´ **í˜•íƒœì†Œ ë¶„ì„ ë° ì–´ê°„ ì¶”ì¶œ**ì´ í•„ìš”#### í•´ê²° ë°©ë²•:- **ì¼ë³¸ì–´**: MeCab ê°™ì€ í˜•íƒœì†Œ ë¶„ì„ê¸°ë¥¼ í†µí•´ **ì›í˜• ì¶”ì¶œ(term normalization)** ê°€ëŠ¥- **ì˜ì–´**: `Stemming`, `Lemmatization` ì•Œê³ ë¦¬ì¦˜ í™œìš©    - `run`, `running`, `ran` ë“± â†’ `run`ìœ¼ë¡œ í†µí•©#### Dictionaryë¥¼ ë§Œë“¤ ë•Œ ì›í˜• ê¸°ì¤€ìœ¼ë¡œ termì„ êµ¬ì„±í•˜ë©´:- `"ran"`ì´ ì í˜€ ìˆëŠ” ë¬¸ì„œë„ `"run"`ìœ¼ë¡œ ê²€ìƒ‰ ê°€ëŠ¥í•´ì§- **ê²€ìƒ‰ ë²”ìœ„ë¥¼ í™•ì¥í•˜ë©´ì„œ ëˆ„ë½ì„ ë°©ì§€í•  ìˆ˜ ìˆìŒ**>  **ì„¤ê³„ì— ë”°ë¥¸ íŒë‹¨**ì´ëŸ¬í•œ ë™ì‘ì€ ê²€ìƒ‰ì—”ì§„ì˜ ì„¤ê³„ ì² í•™ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤:- **ì—„ê²©í•œ ì¼ì¹˜ ê¸°ë°˜** â†’ ë…¸ì´ì¦ˆ ì¤„ì´ê¸° ìš©ì´í•˜ì§€ë§Œ ëˆ„ë½ ìœ„í—˜ ìˆìŒ- **ë¶€ë¶„ ë§¤ì¹­/í™œìš©ì–´ í†µí•©** â†’ ê²€ìƒ‰ ìœ ì—°ì„±ì€ ì¦ê°€í•˜ë‚˜ ì •ë°€ë„ëŠ” ë‹¤ì†Œ ì €í•˜ ê°€ëŠ¥#### n-gramì„ termìœ¼ë¡œ ë‹¤ë£¨ê¸°![n-gram indexì˜ ì˜ˆ](image/example_n-gram_index.png)> **n-gramì´ë€?****n-gram**ì€ í…ìŠ¤íŠ¸ë¥¼ **nê°œì˜ ë¬¸ì ë‹¨ìœ„ë¡œ ì—°ì†ì ìœ¼ë¡œ ì˜ë¼ë‚¸ ë‹¨ìœ„**ë¥¼ ì˜ë¯¸í•œë‹¤.- ì˜ˆ: `"abracadabra"`ì˜ **3-gram** â†’ `"abr"`, `"bra"`, `"rac"`, `"aca"`, `"cad"` ...- ë¬¸ì ë‹¨ìœ„ë¥¼ **í•œ ê¸€ìì”© ë°€ë©´ì„œ** nê°œì˜ ì¡°í•©ì„ ë§Œë“¤ì–´ë‚¸ë‹¤.- ì¼ë°˜ì ìœ¼ë¡œ:    - 2-gram â†’ **bi-gram** ("ë°”ì´ê·¸ë¨")    - 3-gram â†’ **tri-gram** ("íŠ¸ë¼ì´ê·¸ë¨")#### ì˜ˆì‹œ:- í…ìŠ¤íŠ¸: `"í•˜í…Œë‚˜ì˜ë§ˆìŠ¤ì½”íŠ¸"`- 2-gram ê²°ê³¼: `"í•˜í…Œ"`, `"í…Œë‚˜"`, `"ë‚˜ì˜"`, `"ì˜ë§ˆ"`, `"ë§ˆìŠ¤"`, `"ìŠ¤ì½”"`, `"ì½”íŠ¸"`> **ì—­ì¸ë±ìŠ¤ êµ¬ì„± ë°©ì‹ (n-gram ê¸°ë°˜)**- í…ìŠ¤íŠ¸ë¥¼ n-gramìœ¼ë¡œ ë¶„í• - ê° n-gramì´ **ì–´ë–¤ ë¬¸ì„œì— ë“±ì¥í•˜ëŠ”ì§€** ì—­ë°©í–¥ìœ¼ë¡œ ë§¤í•‘- ì˜ˆ:  ```plaintext  "í•˜í…Œë‚˜ì˜ë§ˆìŠ¤ì½”íŠ¸ì¸ì‹œë‚˜ëª¬ì€ë„ì¿„ì—ì—†ë‹¤"  â†’ 2-gram ë‹¨ìœ„ë¡œ: í•˜í…Œ, í…Œë‚˜, ë‚˜ì˜, ì˜ë§ˆ, ë§ˆìŠ¤, ìŠ¤ì½”, ì½”íŠ¸, ...  â†’ ì—­ì¸ë±ìŠ¤: "í•˜í…Œ" â†’ doc1, "í…Œë‚˜" â†’ doc1, "ë‚˜ì˜" â†’ doc1 ...  ```  #### ì¿¼ë¦¬ë„ ë™ì¼í•œ ê·œì¹™ìœ¼ë¡œ ë¶„í• í•˜ê¸°n-gramì„ ê¸°ë°˜ìœ¼ë¡œ Dictionary(ì—­ì¸ë±ìŠ¤)ë¥¼ êµ¬ì„±í•˜ëŠ” ê²½ìš°,  **ì‚¬ìš©ìì˜ ê²€ìƒ‰ ì¿¼ë¦¬ë„ ë™ì¼í•œ n-gram ê·œì¹™ìœ¼ë¡œ ë¶„í• í•˜ì—¬ ì²˜ë¦¬**í•´ì•¼ í•œë‹¤.> **ì˜ˆì‹œ: "í•˜í…Œë‚˜" ê²€ìƒ‰**- ì‚¬ìš©ìê°€ `"í•˜í…Œë‚˜"`ë¥¼ ê²€ìƒ‰í•  ê²½ìš°, 2-gram ê¸°ì¤€ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ë‚˜ëˆ„ë©´:    - `"í•˜í…Œ"`, `"í…Œë‚˜"` â†’ ì´ ë‘ ê°œì˜ termì´ ìƒì„±ë¨- ê°ê°ì˜ termì— ëŒ€í•´ ì—­ì¸ë±ìŠ¤ë¥¼ ì¡°íšŒí•˜ì—¬ **postings list**(ë¬¸ì„œ ë²ˆí˜¸ ëª©ë¡)ë¥¼ ì–»ëŠ”ë‹¤.ì˜ˆ:- `"í•˜í…Œ"` â†’ `[1, 3, 4]`- `"í…Œë‚˜"` â†’ `[1, 3, 4]`> **êµì§‘í•©(intersection) ê³„ì‚°**ê° n-gram termì´ í¬í•¨ëœ ë¬¸ì„œ ID ë¦¬ìŠ¤íŠ¸ì˜ **êµì§‘í•©**ì„ ê³„ì‚°í•œë‹¤.- `í•˜í…Œ âˆ© í…Œë‚˜ = [1, 3, 4]`- â†’ ì¦‰, `"í•˜í…Œë‚˜"`ê°€ í¬í•¨ëœ ë¬¸ì„œëŠ” 1, 3, 4ë²ˆ ë¬¸ì„œì´ëŸ° ë°©ì‹ìœ¼ë¡œ ì¿¼ë¦¬ë„ n-gram ê·œì¹™ì— ë”°ë¼ ë™ì¼í•˜ê²Œ ë¶„í• í•˜ë©´,  **ì •í™•íˆ ê²€ìƒ‰ì–´ê°€ í¬í•¨ëœ ë¬¸ì„œë§Œ ì¶”ì¶œ**í•  ìˆ˜ ìˆë‹¤.- ì‚¬ìš©ìê°€ `"í•˜í…Œë‚˜"`ë¥¼ ê²€ìƒ‰í•  ê²½ìš°, 2-gram ê¸°ì¤€ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ë‚˜ëˆ„ë©´:    - `"í•˜í…Œ"`, `"í…Œë‚˜"` â†’ ì´ ë‘ ê°œì˜ termì´ ìƒì„±ë¨- ê°ê°ì˜ termì— ëŒ€í•´ ì—­ì¸ë±ìŠ¤ë¥¼ ì¡°íšŒí•˜ì—¬ **postings list**(ë¬¸ì„œ ë²ˆí˜¸ ëª©ë¡)ë¥¼ ì–»ëŠ”ë‹¤.ì˜ˆ:- `"í•˜í…Œ"` â†’ `[1, 3, 4]`- `"í…Œë‚˜"` â†’ `[1, 3, 4]`>  **êµì§‘í•©(intersection) ê³„ì‚°**ê° n-gram termì´ í¬í•¨ëœ ë¬¸ì„œ ID ë¦¬ìŠ¤íŠ¸ì˜ **êµì§‘í•©**ì„ ê³„ì‚°í•œë‹¤.- `í•˜í…Œ âˆ© í…Œë‚˜ = [1, 3, 4]`- â†’ ì¦‰, `"í•˜í…Œë‚˜"`ê°€ í¬í•¨ëœ ë¬¸ì„œëŠ” 1, 3, 4ë²ˆ ë¬¸ì„œì´ëŸ° ë°©ì‹ìœ¼ë¡œ ì¿¼ë¦¬ë„ n-gram ê·œì¹™ì— ë”°ë¼ ë™ì¼í•˜ê²Œ ë¶„í• í•˜ë©´,  **ì •í™•íˆ ê²€ìƒ‰ì–´ê°€ í¬í•¨ëœ ë¬¸ì„œë§Œ ì¶”ì¶œ**í•  ìˆ˜ ìˆë‹¤.#### n-gram ë¶„í•  ë¬¸ì œì™€ í•„í„°ë§n-gram ë°©ì‹ì€ í…ìŠ¤íŠ¸ë¥¼ nê°œì˜ ë¬¸ì ë‹¨ìœ„ë¡œ ë‚˜ëˆ ì„œ ê²€ìƒ‰í•˜ëŠ” ê¸°ë²•ìœ¼ë¡œ, ë‹¤ì–‘í•œ ì–¸ì–´ì— ëŒ€í•œ ì¼ë°˜ì ì¸ ì ‘ê·¼ì„ ì œê³µí•˜ì§€ë§Œ ë‹¤ìŒê³¼ ê°™ì€ **ê²€ìƒ‰ ì •í™•ë„ ë¬¸ì œ**ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.ì˜ˆ: `æ±äº¬éƒ½`ë¥¼ 2-gramìœ¼ë¡œ ë‚˜ëˆ„ë©´ `æ±äº¬`, `äº¬éƒ½`ë¡œ ë¶„ë¦¬ëœë‹¤. ë§Œì•½ "æ±äº¬éƒ½ì™€ äº¬éƒ½"ê°€ í¬í•¨ëœ ë¬¸ì„œê°€ ìˆë‹¤ë©´, ì‚¬ìš©ìê°€ "æ±äº¬éƒ½"ë§Œ ê²€ìƒ‰í–ˆìŒì—ë„ ê²€ìƒ‰ ê²°ê³¼ì— í¬í•¨ë  ìˆ˜ ìˆë‹¤. ì´ëŠ” ì˜ëª»ëœ ê²€ìƒ‰ ê²°ê³¼ë‹¤.- ë¬¸ì œ ì›ì¸  - ì‹¤ì œë¡œëŠ” `æ±äº¬éƒ½`ë¼ëŠ” ì—°ì†ëœ ë¬¸ìì—´ì´ ë¬¸ì„œ ë‚´ì— ì—†ê¸° ë•Œë¬¸.  - n-gram ì¸ë±ìŠ¤ëŠ” ë¶„ë¦¬ëœ term ë‹¨ìœ„ë¡œ ì²˜ë¦¬ë˜ë¯€ë¡œ, ì—°ì†ëœ ë‹¨ì–´ê°€ ì•„ë‹Œë°ë„ ê²°ê³¼ë¡œ í¬í•¨ë  ìˆ˜ ìˆë‹¤.- í•„í„°ë§ì˜ ê°œë…ê³¼ í•´ê²° ë°©ë²•  - ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ë³´í†µ ë‹¤ìŒê³¼ ê°™ì€ **í•„í„°ë§**ì„ ìˆ˜í–‰í•œë‹¤:    - **í›„ì²˜ë¦¬ í•„í„°ë§**: n-gram ê²€ìƒ‰ ê²°ê³¼ ì¤‘ ì‹¤ì œ ë¬¸ì„œì— ê²€ìƒ‰ì–´ê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ë¥¼ ë‹¤ì‹œ ì¡°ì‚¬í•˜ì—¬ í™•ì¸.    - ì˜ˆ: n-gram ì¸ë±ìŠ¤ëŠ” `æ±äº¬éƒ½ì™€ äº¬éƒ½`ë¼ëŠ” ë¬¸ì„œë„ `æ±äº¬éƒ½` ê´€ë ¨ ë¬¸ì„œë¡œ ë°˜í™˜í•˜ì§€ë§Œ, ì‹¤ì œ ë¬¸ìì—´ì´ ì—†ìœ¼ë©´ í•„í„°ë§ ë‹¨ê³„ì—ì„œ ì œê±°.- ë‹¨ì   - ê²€ìƒ‰ ê²°ê³¼ ìˆ˜ê°€ ë§ì•„ì§€ë©´ í•„í„°ë§ì— ë“œëŠ” ë¹„ìš©ì´ ì»¤ì§€ê³  ì„±ëŠ¥ ì €í•˜ ì´ˆë˜  - ê²°ê³¼ì ìœ¼ë¡œ `grep` ë“± ì „í†µì ì¸ ë°©ë²•ê³¼ ë™ì¼í•œ ìˆ˜ì¤€ì˜ ê³„ì‚°ëŸ‰ì´ ì†Œìš”ë  ìˆ˜ ìˆìŒ- í•˜í…Œë‚˜ ë¶ë§ˆí¬ ì—ì„œì˜ ì‚¬ë¡€  - í•˜í…Œë‚˜ë¶ë§ˆí¬ëŠ” **ë‹¨ì–´ ê¸°ë°˜ ì—­ ì¸ë±ìŠ¤**ì™€ **n-gram ê¸°ë°˜ ì—­ ì¸ë±ìŠ¤**ë¥¼ ë³‘í–‰í•˜ì—¬ ì‚¬ìš©  - title, content, URL ë“± ë‹¤ì–‘í•œ í•­ëª©ì„ ëŒ€ìƒìœ¼ë¡œ ê°ê° ì¸ë±ì‹±  - í•„í„°ë§ì„ ê°„ë‹¨íˆ í•  ìˆ˜ ìˆë„ë¡ `200~300 byte` ìˆ˜ì¤€ì˜ ë¬¸ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ë“± **ì‚¬ì „ ì œí•œ ì¡°ê±´** í™œìš©- ìµœì‹  ì—°êµ¬ ë™í–¥  - ë‹¨ì–´ ì¸ë±ìŠ¤ì™€ n-gram ì¸ë±ìŠ¤ë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ê³   - ë‘ ê²°ê³¼ë¥¼ `merge`í•˜ì—¬ í•„í„°ë§ ë¹„ìš©ê³¼ ê²€ìƒ‰ ì •í™•ë„ë¥¼ ë™ì‹œì— í™•ë³´í•˜ë ¤ëŠ” ì—°êµ¬ê°€ ì§„í–‰ ì¤‘#### ì¬í˜„ë¥ (Recall)ê³¼ ì í•©ë¥ (Precision)| ê°œë… | ì„¤ëª… ||------|------|| **ì¬í˜„ë¥  (Recall)** | ì „ì²´ ì •ë‹µ ë¬¸ì„œ ì¤‘ì—ì„œ, ê²€ìƒ‰ ê²°ê³¼ë¡œ ë°˜í™˜ëœ ì •ë‹µ ë¬¸ì„œì˜ ë¹„ìœ¨. ì¦‰, ì‹œìŠ¤í…œì´ ì–¼ë§ˆë‚˜ ë¹ ëœ¨ë¦¬ì§€ ì•Šê³  "ì •ë‹µ"ì„ ì°¾ì•„ëƒˆëŠ”ê°€ì— ëŒ€í•œ ì§€í‘œ. || **ì í•©ë¥  (Precision)** | ê²€ìƒ‰ ê²°ê³¼ ì¤‘ì—ì„œ ì‹¤ì œ ì •ë‹µì¸ ë¬¸ì„œì˜ ë¹„ìœ¨. ì¦‰, ê²€ìƒ‰ ê²°ê³¼ê°€ ì–¼ë§ˆë‚˜ ì •í™•í•˜ê²Œ "ì •ë‹µë§Œ" í¬í•¨í–ˆëŠ”ê°€ì— ëŒ€í•œ ì§€í‘œ. |ìˆ˜ì‹:- **ì¬í˜„ë¥  = C / B**- **ì í•©ë¥  = C / A**> A: ê²€ìƒ‰ê²°ê³¼, B: ì •ë‹µ ë¬¸ì„œ ì „ì²´, C: ê²€ìƒ‰ê²°ê³¼ ì¤‘ ì •ë‹µ ë¬¸ì„œ![9.5 ì¬í˜„ë¥ ê³¼ ì í•©ë¥ ](image/recall_and_precision.png)- `ì „ì²´ ë¬¸ì„œ ì§‘í•© B` ì¤‘ì—ì„œ `â€˜í•˜í…Œë‚˜â€™`ë¼ëŠ” ì •ë‹µì„ í¬í•¨í•˜ëŠ” ë¬¸ì„œê°€ ìˆìŒ.- ê²€ìƒ‰ ì‹œìŠ¤í…œì´ Aë¼ëŠ” ê²°ê³¼ë¥¼ ë°˜í™˜í–ˆëŠ”ë°, ì´ ì¤‘ ì‹¤ì œ â€˜í•˜í…Œë‚˜â€™ ê´€ë ¨ ë¬¸ì„œê°€ Cê°œë¼ë©´:  - **ì¬í˜„ë¥ **: ì–¼ë§ˆë‚˜ ë§ì€ ì •ë‹µì„ ì°¾ì•„ëƒˆëŠ”ê°€ â†’ `C / B`  - **ì í•©ë¥ **: ì–¼ë§ˆë‚˜ ì •í™•í•˜ê²Œ ì •ë‹µë§Œ í¬í•¨í–ˆëŠ”ê°€ â†’ `C / A`> **ì‰¬ìš´ ì´í•´ë¥¼ ìœ„í•œ ë¹„ìœ : ê²Œì„ì„¼í„° í¬ë ˆì¸ ê²Œì„**#### ìƒí™©- í¬ë ˆì¸ ê²Œì„ê¸°ì— ê³¼ìê°€ ì—¬ëŸ¬ ê°œ ìˆìŒ (ì´ˆì½œë¦¿ + ë‹¤ì‹œë§ˆ ê³¼ì)- ì´ˆì½œë¦¿ë§Œ ë¨¹ê³  ì‹¶ì€ ì‚¬ìš©ì ì…ì¥ì—ì„œ, ì•„ë˜ ë‘ ê°€ì§€ ê²½ìš°ê°€ ìˆìŒ:#### íŒ¨í„´ â‘ : ì´ˆì½œë¦¿ë§Œ ë§ì´ ì§‘ì—ˆì§€ë§Œ ë‹¤ì‹œë§ˆë„ ì„ì—¬ ìˆìŒ- â†’ **ì¬í˜„ë¥ ì´ ë†’ë‹¤**, **ì í•©ë¥ ì€ ë‚®ë‹¤**#### íŒ¨í„´ â‘¡: ë‹¤ì‹œë§ˆëŠ” í•˜ë‚˜ë„ ì—†ê³  ì´ˆì½œë¦¿ë§Œ ì •í™•í•˜ê²Œ ì§‘ì—ˆìŒ- â†’ **ì í•©ë¥ ì´ ë†’ë‹¤**, **ì¬í˜„ë¥ ì€ ë‚®ë‹¤**> **í•µì‹¬ ìš”ì•½**| ì§€í‘œ | ì„¤ëª… | ì˜ ë‚˜íƒ€ë‚´ëŠ” ì˜ˆ ||------|------|----------------|| **ì¬í˜„ë¥ ** | ë¹ ëœ¨ë¦¬ì§€ ì•Šê³  ë‹¤ ê°€ì ¸ì˜¤ëŠ” ëŠ¥ë ¥ | ì´ˆì½œë¦¿ì„ ê°€ëŠ¥í•œ í•œ ë§ì´ ë½‘ìŒ (í•˜ì§€ë§Œ ë‹¤ì‹œë§ˆê°€ ê»´ ìˆìŒ) || **ì í•©ë¥ ** | ì •í™•í•œ ê²ƒë§Œ ê°€ì ¸ì˜¤ëŠ” ëŠ¥ë ¥ | ì´ˆì½œë¦¿ë§Œ ë½‘ê³  ë‹¤ì‹œë§ˆëŠ” ì ˆëŒ€ ì—†ìŒ |> **ì‹¤ë¬´ ì ìš© ì‹œ ê³ ë ¤ì‚¬í•­**- ê²€ìƒ‰ ì‹œìŠ¤í…œì—ì„œëŠ” **ì¬í˜„ë¥ **ê³¼ **ì í•©ë¥ ** ì‚¬ì´ì˜ **íŠ¸ë ˆì´ë“œì˜¤í”„**ë¥¼ ê³ ë ¤í•´ì•¼ í•¨.- ë‘˜ ë‹¤ ë™ì‹œì— ë†’ì´ëŠ” ê²ƒì€ í˜„ì‹¤ì ìœ¼ë¡œ ì–´ë ¤ì›€ â†’ **ëª©í‘œì— ë”°ë¼ ìµœì í™” ì§€í‘œë¥¼ ê²°ì •**í•´ì•¼ í•¨.  - ì˜ˆ: ê²€ìƒ‰ ëˆ„ë½ ì—†ì´ ëª¨ë‘ ë³´ì—¬ì£¼ëŠ” ë‰´ìŠ¤ ê²€ìƒ‰ â†’ ì¬í˜„ë¥  ì¤‘ìš”  - ì •í™•í•œ ê²°ê³¼ë§Œ ë³´ì—¬ì£¼ëŠ” ì¶”ì²œ ì‹œìŠ¤í…œ â†’ ì í•©ë¥  ì¤‘ìš”#### ê²€ìƒ‰ ì‹œìŠ¤í…œ í‰ê°€ì™€ ì¬í˜„ë¥ /ì í•©ë¥ ì¬í˜„ë¥ /ì í•©ë¥ ì„ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ ê²€ìƒ‰ ì‹œìŠ¤í…œì— íŠ¹ì • ì¿¼ë¦¬ë¥¼ ì…ë ¥í–ˆì„ ë•Œì˜ ì„±ëŠ¥ì„ ì •ëŸ‰í™”í•  ìˆ˜ ìˆë‹¤.  ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒê³¼ ê°™ì´ í‘œí˜„í•  ìˆ˜ ìˆë‹¤:- â€œì´ ì‹œìŠ¤í…œì€ ì í•©ë¥ ì€ ë†’ì§€ë§Œ ì¬í˜„ë¥ ì´ ë‚®ë‹¤.â€- â€œë³„ë‹¤ë¥¸ ì“¸ëª¨ëŠ” ì—†ì§€ë§Œ ì „ì²´ì ìœ¼ë¡œëŠ” ì„±ëŠ¥ì´ ë‚˜ì˜ì§€ ì•Šë‹¤.â€ì‹¤ì œ ì—°êµ¬ê°œë°œ ì„¸ê³„ì—ì„œëŠ” ìì‹ ë“¤ì´ ì—°êµ¬ ëª©ì ìœ¼ë¡œ ë§Œë“  ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ì„ í‰ê°€í•  ê²½ìš°ì— **ì¬í˜„ë¥ /ì í•©ë¥ **ì„ ì‚¬ìš©í•˜ë©°, ì‹¤ì œ ì‹œìŠ¤í…œì—ì„œë„ ì´ ì ì—ì„œ **ìƒë°˜ ê´€ê³„ê°€ ìˆë‹¤ëŠ” ê²ƒ**### Postings ì‘ì„±ë²• - ì—­ ì¸ë±ìŠ¤ ì‘ì„±ë²• #2 #### Dictionary ì´í›„ ì„¤ëª…ì§€ê¸ˆê¹Œì§€ Dictionaryì— ëŒ€í•œ ì´ì•¼ê¸°ë¥¼ í–ˆë‹¤. ë‹¤ìŒì€ Postings ë§Œë“œëŠ” ë²•ì„ ì‚´í´ë³¸ë‹¤. ë³µìŠµí•  ê²¸ ê·¸ë¦¼ 9.3ì˜ ìš°ì¸¡ ë¶€ë¶„ì„ ë§Œë“œëŠ” ë²•ì— ëŒ€í•œ ì´ì•¼ê¸°ë‹¤.Postingsë€ íŠ¹ì • ë‹¨ì–´ë¥¼ í¬í•¨í•˜ëŠ” ë¬¸ì„œ ë²ˆí˜¸ ë˜ëŠ” IDë¥¼ ë§í•œë‹¤. IDë¥¼ ì§€ë‹Œ ë°°ì—´ê³¼ ê°™ë‹¤.#### ì—­ ì¸ë±ìŠ¤ì˜ ì˜ˆ| Dictionary | Postings ||------------|----------|| í•˜í…Œë‚˜     | 1, 3, 4  || ì‹œë‚˜ëª¬     | 1, 3     || êµí†        | 2        || ë„ì¿„       | 2        || í™‹ì¹´ì´ë„   | 2        || kurain     | 2, 3     |#### Postingsì˜ í™œìš©- PostingsëŠ” ë¬¸ì„œ IDë§Œ ë³´ìœ í•  ìˆ˜ë„ ìˆê³ , termì´ ë¬¸ì„œ ë‚´ ì–´ë””ì— ë“±ì¥í–ˆëŠ”ì§€ ìœ„ì¹˜ë¥¼ ì €ì¥í•  ìˆ˜ë„ ìˆë‹¤.- í›„ìëŠ” 'Full Inverted Index'ë¼ê³  ë¶ˆë¦°ë‹¤.- ì¶œí˜„ ìœ„ì¹˜ê°€ ìˆìœ¼ë©´ ìŠ¤ë‹ˆí« ì¶”ì¶œì´ë‚˜ ë¬¸ë§¥ íŒë‹¨ì— ìœ ë¦¬í•˜ë‹¤.ì˜ˆë¥¼ ë“¤ì–´, â€˜í•˜í…Œë‚˜â€™ì™€ â€˜êµí† â€™ë¡œ ê²€ìƒ‰í•˜ë©´ ë‘˜ì´ ê°€ê¹Œìš´ ë¬¸ë§¥ì¼ ë•Œ ê²€ìƒ‰ì— ìœ ìš©í•˜ë‹¤.Googleë„ ì´ ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.ë˜í•œ n-gram í•„í„°ë§ì—ë„ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.#### ì¶œí˜„ ìœ„ì¹˜ë¥¼ ì €ì¥í•˜ì§€ ì•Šê³  ë¬¸ì„œIDë§Œì„ ì €ì¥í•˜ëŠ” íƒ€ì…- ì¶œí˜„ ìœ„ì¹˜ ì—†ì´ ë¬¸ì„œ IDë§Œ ì €ì¥í•˜ë©´ ì—­ íŒŒì¼ ì¸ë±ìŠ¤ë¼ê³ ë„ í•œë‹¤.- êµ¬ì¡°ê°€ ë‹¨ìˆœí•˜ê³ , ìš©ëŸ‰ë„ ì‘ê³ , êµ¬í˜„ë„ ì‰¬ì›€.- ë¬¸ì„œ IDë¥¼ ì •ë ¬í•˜ë©´ VB Codeë¡œ ì••ì¶• ê°€ëŠ¥í•˜ë‹¤.- ì´ ê²½ìš°, postingsëŠ” term â†’ ì••ì¶•ëœ ë¬¸ì„œ ID ë¦¬ìŠ¤íŠ¸ êµ¬ì¡°ë¡œ êµ¬ì„±ë¨.- ì €ì¥ êµ¬ì¡° ì˜ˆì‹œ  - Perlì˜ í•´ì‹œì²˜ëŸ¼ key-value êµ¬ì¡°ë¡œ ì €ì¥.  - ì—¬ëŸ¬ ê²€ìƒ‰ ì—”ì§„ì€ key-value ì €ì¥ì†Œë¥¼ ë‚´ì¥í•¨ (Hyper Estraier, Lux IO ë“±).  - termì€ key, ë¬¸ì„œ ID ë°°ì—´ì€ valueë¡œ ê°„ì£¼ ê°€ëŠ¥.- Postingsì™€ ë°ì´í„° êµ¬ì¡° ë©”ëª¨  - ë¬¸ì„œ ID ìˆœì„œ: ì •ë ¬ + VB Code ì••ì¶•  - ì¥ì : ì••ì¶•ë¥  ì¢‹ê³  ì „ê°œ ì†ë„ ë¹ ë¦„  - êµ¬ì¡°: term => ì••ì¶•ëœ Postings List  - key-value ìŠ¤í† ì–´ì— ì í•©