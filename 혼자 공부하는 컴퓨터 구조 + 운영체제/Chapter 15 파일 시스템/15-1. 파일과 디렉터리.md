# Chapter 15 파일 시스템
## 15-1. 파일과 디렉터리

### 파일
- 일상적으로 컴퓨털르 이용할 때는 파일 단위를 이용한다.
  - **파일(file)** 이란 하드 디스크나 SSD와 같은 보조기억장치에 저장된 관련 정보의 집합을 의미한다.
  - 달리 표현하면 파일은 의미 있고 관련 있는 정보를 모은 논리적 단위를 뜻한다.
- 그렇다면 파일을 이루는 정보에는 어떤 것들이 있을까?
  - 모든 파일에는 이름과 파일을 실행하기 위한 정보, 그리고 파일 관련 부가 정보가 있다.
  - 이 부가 정보를 **속성(attribute)** 또는 **메타데이터(metadata)** 라고 부른다.

#### 파일 속성과 유형
- 운영체제마다 유지하는 파일 속성은 조금씩 차이가 있지만, 대표적인 속성의 종류는 다음과 같다.

| 속성 이름     | 의미                                      |
|-----------|-----------------------------------------|
| 유형        | 운영체제가 인지한느 파일의 종류를 나타낸다.                |
| 크기        | 파일의 현재 크기와 허용 가능한 최대 크기를 나타낸다.          |
| 보호        | 어떤 사용자가 해당 파일을 읽고, 쓰고, 실행할 수 있는지를 나타낸다. |
| 생성 날짜     | 파일이 생성된 날짜를 나타낸다.                       |
| 마지막 접근 날짜 | 파일에 마지막으로 접근한 날짜를 나타낸다.                 |
| 마지막 수정 날짜 | 파일이 마지막으로 수정된 날짜를 나타낸다.                 |
| 생성자       | 파일을 생성한 사용자를 나타낸다.                      |
| 소유자       | 파일을 소유한 사용자를 나타낸다.                      |
| 위치        | 파일의 보조기억장치상의 현재 위치를 나타낸다.               |

- 파일 속성 중 **파일 유형** 은 운영체제가 인식하는 파일 종류를 나타낸다.
  - 같은 이름의 파일일지라도 텍스트 파일, 실행 파일, 음악 파일 등 유형이 다르면 실행 양상도 달라진다.
  - 그래서 파일을 실행할 운영체제에 파일 유형을 알려주어야 한다.
  - 파일 유형을 알리기 위해 가장 흔히 사용하는 방식은 파일 이름 뒤에 붙는 **확장자(extenstion)** 를 이용하는 것이다.
  - 확장자는 파일 종류가 무엇인지 운영체제에 알려주는 힌트와도 같다.

#### 파일 연산을 위한 시스템 호출
- 파일을 다루는 모든 작업은 운영체제에 의해 이뤄진다.
  - 어떤 응용 프로그램도 임의로 파일을 조작 할 수 없으며 파일을 다루려면 운영체제에 부탁해야 한다.
  - 이를 위해 운영체제는 다음과 같은 파일 연산을 위한 **시스템 호출** 을 제공한다.
    1. 파일 생성
    2. 파일 삭제
    3. 파일 열기
    4. 파일 닫기
    5. 파일 읽기
    6. 파일 쓰기
  
### 디렉터리
- 파일들을 일목요연하게 관리하기 위해 **디렉터리(directory)** 를 이용할 수 있다.
  - 윈도우 운영체제에서는 디렉터리를 **폴더(folder)** 라고 부른다.
- 옛날 운영체제에서는 하나의 디렉터리만 존재하였다.
  - 모든 파일이 하나의 디렉터리 아래에 있었다.
  - 이와 같은 디렉터리 구조를 **1단계 디렉터리(single-level directory)** 라고 부른다.
- 하지만 컴퓨터 용량이 커지다 보니 저장할 수 있는 파일도 많아지도 1단계 디렉터리로는 많은 파일을 관리하기가 어렵기 떄문에 다음과 같이 여러 계층을 가진 **트리 구조 디렉터리(tree-structured directory)** 가 생겨 났다.
  - 트리 구조 디렉터리는 최상위 디렉터리가 있고 그 아래에 여러 서브 디렉터리(자식 디렉터리)가 있을 수 있다.
  - 서브 디렉터리도 또 다른 서브 디렉터리를 가질 수 있다.
  - 최상위 디렉터리는 흔히 **루트 디렉터리(root directory)** 라고 부르고 슬래시(/)로 표현한다.
- 그러다 보니 자연스레 생긴 개념이 바로 **경로(path)** 이다.
  - 경로는 디렉터리를 이용해 파일 위치, 나아가 파일 이름을 특정 짓는 정보이다.
  
#### 절대 경로와 상대 경로
- 많은 사람이 경험을 통해 알고 있듯 같은 디렉터리에는 동일한 이름의 파일이 존재할 수 없지만, 서로 다른 디렉터리에는 동일한 이름의 파일이 존재할 수 있다.
  - 모든 파일은 루트 리렉터리에서 자기 자신까지 이르는 고유한 경로를 가지고 있고, 이러한 경로를 **절대 경로(absolute path)** 라고 부른다.
- 경로를 나타내는 또 다른 대중적인 방식으로 **상대 경로(relative path)** 가 있다.
  - 절대 경로가 루트 디렉터리부터 시작하는 경로라면 상대 경로는 현재 디렉터리부터 시작하는 경로이다.
  - 가령 트리 구조 디렉터리 그림에서 현재 디렉터리 경로가 /home이라면 d.jpg 파일의 상대 경로는 guest/d.jpg가 된다.

#### 디렉터리 연산을 위한 시스템 호출
- 운영체제가 파일 연산을 위한 시스템ㅌ 호출을 제공하는 것처럼 운영체제는 디렉터리 연산을 위한 시스템 호출도 제공한다.
  - 대표적인 종류는 다음과 같다.
    1. 디렉터리 생성
    2. 디렉터리 삭제
    3. 디렉터리 열기
    4. 디렉터리 닫기
    5. 디렉터리 읽기

#### 디렉터리 엔트리
- 우리는 아마 파일과 디렉터리는 엄연히 다른 별개의 존재라고 생각할 수 도 있다.
  - 많은 운영체제에서는 디렉터리는 그저 '특별한 형태의 파일'로 간주한다.
  - 즉, 디렉터리도 파일이다. 단지 포함된 정보가 조금 특별할 뿐이다.
- 파일이 내부에 해당 파일과 관련된 정보를 담고 있다면, 디렉터리는 내부에 해당 디렉터리에 담겨있는 대상과 관련된 정보를 담고 있다.
  - 그리고 이 정보는 보통 테이블(표) 형태로 구성된다.
  - 즉, 디렉터리는 보조기억장치에 테이블 형태의 정보로 저장된다.
- 파일 시스템을 막록하고 디렉터리 엔트리가 공통으로 표함하는 정보가 있다면 그것은 디렉터리에 포함된 대상의 이름과 그 대상이 보조기억장치 내에 저장된 위치를 유추할 수 있는 정보가 담긴다는 점이다.
  - 다시 말해 디렉터리 엔트리만 보아도 해당 디렉터리에 무엇이 담겨 있는지, 그리고 그것들은 보조기억장치의 어디에 있는지를 직간접적으로 알 수 있다.

> #### 좀 더 알아보기) 상대 경로를 나타내는 또 다른 방법
> - 대부분의 운영체제는 현재 디렉터리를 마침표(.)로 나타내고, 현재 작업 디렉터리의 상위 디렉터리(부모 디렉터리)를 마침표 두 번(..)으로 나타낸다.
>   - 그리고 흔히 이 기호를 이용해 상대 경로를 표현한다.
> - 예를 들어 현재 작업 디렉터리가 /home인 경우 파일 b.c의 상대 경로는 ./minchul/b.c로 나타낼 수 있다.
>   - 마찬가지로 현재 작업 리렉터리가 /bin인 경우 파일 e는 ./e로 나타낼 수 있다.

---