# Chapter 07. 보조기억장치
## 7-2. RAID의 정의와 종류
- 1TB 하드 디스크 네 개와 4TB 하드 디스크 한 개를 비교해보자.
  - 1TB 하드 디스크 네 개를 동시에 사용하는게 나을 것인가? 아니면 4TB 하드 디스크 한 개를 사용하는게 나을까?
    - 1TB 하드 디스크 네 개로 RAID를 구성하면 4TB 하드 디스크 한 개의 성능과 안전성을 능가할 수 있다.
    - 그렇다면 RAID가 무엇이고, 왜 이런 차이가 생기는지 알아보자.

### RAID의 정의
- 데이터에는 개인 정보, 결제 정보와 같이 절대로 잃어버려서는 안 될 민감한 정보도 포함되어 있다. 
- '보조기억장치에도 수명이 있다.'
- **RAID(Redundant Array of Indepentdent Disks)**
  - 주로 하드 디스크와 SSD를 사용하는 기술로 데이터의 안정성 혹은 높은 성능을 위해 여러 개의 물리적 보조기억장치를 마치 하나의 논리적 보조기억장치처럼 사용하는 기술을 의미한다.

### RAID의 종류
- 여러 개의 하드 디스크나 SSD를 마치 하나의 장치처럼 사용하는 RAID를 구성하는 방법은 여러 가지가 있다.
- RAID 구성 방법을 **RAID 레벨** 이라 표현하는데, RAID 레벨에는 대표적으로 RAID 0, RAID 1, RAID 2, RAID 3, RAID 4, RAID 5, RAID 6이 있고 그로부터 파생된 RAID 10, RAID 50 등이 있다.
- RAID 2, RAID 3은 현재 잘 활용되지 않는다.

#### RAID 0
- 여러 개의 보조기억장치에 데이터를 단순히 나누어 저장하는 구성 방식이다.
- 1TB 하드 디스크 네 개로 RAID 0를 구성했다고 가정하자.
  - 어떠한 데이터를 저장할 때 각 하드 디스크는 번갈아 가며 데이터를 저장한다.
    - 즉, 저장하는 데이터가 하드 디스크 개수만큼 나뉘어 저장된다.
  - 이때 마치 줄무늬처럼 분산되어 저장된 데이터를 **스트라입(stripe)** 이라 하고, 분산하여 저장하는 것을 **스트라이핑(striping)** 이라 한다.
    - 참고로, stripe는 영어로 줄무늬라는 뜻이다.
  - 위와 같이 데이터가 분산되어 저장되면, 다시 말해 스트라이핑되면 저장된 데이터를 읽고 쓰는 속도가 빨라진다.
    - 하나의 대용량 저장 장치를 이용했더라면 여러 번에 걸쳐 읽고 썼을 데이터를 동시에 읽고 쓸 수 있기 때문이다.
  - 그렇기에 4TB 저장 장치 한 개를 읽고 쓰는 속도보다 RAID 0로 구성된 1TB 저장 장치 네 개의 속도가 이론상 네 배가량 빠르다.
  - 단점
    - 저장된 정보가 안전하지 않다.
    - RAID 0으로 구성된 하드 디스크 중 하나에 문제가 생긴다면 다른 모든 하드 디스크의 정보를 읽는 데 문제가 생길 수 있다.
      - 그래서 등장한 것이 RAID 1 이다.

#### RAID 1
- **RAID 1**은 복사본을 만드는 방식이다.
  - 마치 거울처럼 완전한 복사본을 만드는 구성이기에 **미러링(mirroring)**이라 부른다.
- 가령 네 개의 하드 디스크를 RAID로 RAID 1을 구성한다면
  - RAID 0처럼 데이터 스트라이핑이 사용되겠지만 하드 디스크를 두 개씩 나눠서 마치 거울처럼 복사본을 만든다.
  - RAID 1에 어떠한 데이터를 쓸 때는 원본과 복사본 두 군데에 쓴다.
  - 쓰기 속도는 RAID 0 보다 느리다.
- RAID 1 방식은 복구가 매우 간단하다는 장점이 있다.
  - 똑같은 디스크가 두 개 있는 셈이니, 하나에 무제가 발생해도 잃어버린 정보를 금방 되찾을 수 있다.
- 하지만 RAID 1은 하드 디스크 개수가 한정되었을 때 사용 가능한 용량이 적어진다는 단점이 있다.
  - 가령 1TB 4개의 하드 디스크 구조에서 RAID 0 구성은 4TB의 정보를 저장할 수 있는 반면, RAID 1에서는 2TB의 정보만 저장할 수 있다.
  - **즉, RAID 1에서는 복사본이 만들어지는 용량만큼 사용자가 사용하지 못한다.**
  - 결국 많은 양의 하드 디스크가 필요하게 되고, 비용이 증가한다는 단점으로 이어진다.

#### RAID 4
- RAID 1처럼 완전한 복사본을 만드는 대신 오류를 검출하고 복구하기 위한 정보를 저장한 장치를 두는 구성 방식이다.
- 이때 '오류를 검출하고 복구하기 위한 정보'를 **패리티 비트(parity bit)** 라고 한다.
- RAID 4에서는 패리티를 저장한 장치를 이용해 다른 장치들의 오류를 검출하고, 오류가 있다면 복구한다.
- 이로써 RAID 4는 RAID 1보다 적은 하드 디스크로도 데이터를 안전하게 보관할 수 있다.
> #### 여기서 잠깐) 오류를 검축하는 패리티 비트
> - 원래 패리티 비트는 오류 검출만 가능할 뿐 오류 복구는 불가능하다.
> - 하지만 RAID 에서는 패리티 값으로 오류 수정도 가능하다.
> 1. RAID 4에서는 패리티 정보를 저장한 장치로써 나머지 장치들의 오류를 검출, 복구한다.
> 2. 패리티 비트는 본래 오류 검출용 정보지만, RAID에서는 오류 복구도 가능하다.

#### RAID 5
- RAID 4에서는 어떤 새로운 데이터가 저장될 때마다 패리티를 저장하는 디스크에도 데이터를 쓰게되므로 패리티를 저장하는 장치에 병목 현상이 발생한다는 문제가 있다.
- RAID 5는 아래 그림처럼 패리티 정보를 분산하여 저장하는 방식으로 RAID 4의 문제인 병목 현상을 해소한다.
- **RAID 4는 패리티를 저장한 장치를 따로 두는 방식이고 RAID 5는 패리티를 분산하여 저장하는 방식이다.**

#### RAID 6
- 구성은 기본적으로 RAID 5와 같으나, 서로 다른 두 개의 패리티를 두는 방식이다.
  - 이는 오류를 검출하고 북구할 수 있는 수단이 두 개가 생기는 셈이다.
  - 따라서 RAID 6는 RAID 4나 RAID 5보다 안전한 구성이라 볼 수 있다.
- 다만 새로운 정보를 저장할 때마다 함께 저장할 패리티가 두 개이므로, 쓰기 속도는 RAID 5보다 느리다.
- 따라서 RAID 6은 데이터 저장 속도를 조금 희생하더라도 데이터를 더욱 안전하게 보관하고 싶을 때 사용하는 방식이다.

---
