# Chapter 08 입출력장치
## 8-1. 장치 컨트롤러와 장치 드라이버
- 이번 절에서 **장치 컨틀롤러** 와 **장치 드라이버** 라는 개념을 통해 다양한 외부 장치가 컴퓨터 내부와 어떻게 연결되고 소통되는지 알아보자. 

### 장치 컨트롤러
- 입출력장치는 앞서 학습한 CPU, 메모리보다 다루기가 더 까다롭다. 왜일까?
  1. **첫째, 입출력장치에는 종류가 너무나도 많다.**
    - 입출력장치는 매우 다양하고 자연스레 장치마다 속도, 데이터 전송 형식 등도 매우 다양하다.
      - 따라서 다양한 입출력 장치와 정보를 주고받는 방식을 규격화하기 어렵다.
  2. **둘째, 일반적으로 CPU와 메모리의 데이터 전송률은 높지만 입출력장치의 데이터 전송률은 낮다.**
    - **전송률(transfer rate)** 이란 데이터를 얼마나 빨리 교환할 수 있는지를 나타내는 지표이다.
    - CPU와 메모리처럼 전송률이 높은 장치는 1초에도 수 많은 데이터를 주고받을 수 있지만, 키보드나 마우스와 같이 상대적으로 전송률이 낮은 장치는 같은 시간 동안 데이터를 조금씩만 주고받을 수 있다.
    - 물론 어떤 입출력장치는 CPU나 메모리보다 전송률이 높은 경우도 있지만 결과적으로, CPU나 메모리와 전송률이 비슷하지 않기 때문에 이와 같은 어려움을 겪게 된다.
- 이와 같은 이유로 입출력장치는 컴퓨터에 직접 연결되지 않고 **장치 컨트롤러(device controller)** 라는 하드웨어를 통해 연결된다.
- 장치 컨트롤러는 **입출력 제어기(I/O controller)** , **입출력 모듈(I/O module)** 등으로 다양하게 불린다.
- 모든 입출력 장치는 각자의 장치 컨트롤러를 통해 컴퓨터 내부와 정보를 주고받고,, 장치 컨트롤러는 하나 이상의 입출력장치와 연결되어 있다.
- 장치 컨트롤러의 역할
  1. CPU와 입출력장치 간의 통신 중개
  2. 오류 검출
  3. 데이터 버퍼링
     - **버퍼링(buffering)** 이란 전송률이 높은 장치와 낮은 장치 사이에 주고받는 데이터를 **버퍼(buffer)** 라는 임시 저장 공간에 저장하여 전송률은 비슷하게 맞추는 방법이다.
     - 쉽게 버퍼링은 '버퍼에 데이터를 조금씩 모았다가 한꺼번에 내보내거나, 데이터를 한 번에 많이 받아 조금씩 내보내는 방법'이라 보면 된다.
     - 즉, 장치 컨트롤러는 일반적으로 전송률이 높은 CPU와 일반적으로 전송률이 낮은 입출력장치와의 전송률 차이를 데이터 버퍼링으로 완화한다.
- 입출력장치 종류가 많아 정보 규격화가 어려웠던 문제는 장치 컨틀롤러가 일종의 번역가 역할을 함으로써 해결할 수 있다.
  - 그 과정에서 장치 컨트롤러는 자신과 연결된 입출력장치에 문제가 없는 오류를 검출하기도 한다.

#### 장치 컨트롤러의 간략적인 내부 구조
- 간단하게 **데이터 레지스터(data register)** 와 **상태 레지스터(status register)** , **제어 레지스터(control register)** 세 가지이다.
- **데이터 레지스터**
  - CPU와 입출력장치 사이에 주고받을 데이터가 레지스터이다.
  - 앞서 장치 컨트롤러는 데이터 버퍼링으로 전송률 차이를 완화한다 했는데 데이터 레지스터가 그 버퍼 역할을 한다.
  - 최근 주고받는 데이터가 많은 입출력장치에서는 레지스터 대신 RAM을 사용하기도 한다.
- **상태 레지스터**
  - 입출력장치가 입출력 작업을 할 준비가 되었는지, 입출력 작업이 완료되었는지, 입출력장치에 오류가 없는지 등의 상태 정보가 저장된다.
- **제어 레지스터**
  - 입출력장치가 수행할 내용에 대한 제어 정보와 명령을 저장한다.
- 이 레지스터들에 담긴 값들은 버스를 타고 CPU나 다른 입출력장치로 전달되기도 하고, 장치 컨트롤러에 연결된 입출력장치로 전달된다.

### 장치 드라이버
- 새로운 장치를 컴퓨터에 연결하려면 장치 드라이버를 설치해야 한다.
- **장치 드라이버(device driver)** 란 장치 컨트롤러의 동작을 감지하고 제어함으로써 장치 컨트롤러가 컴퓨터 내부와 정보를 주고받을 수 있게 하는 프로그램이다.
- 프로그램이기에 당연히 실행 과정에서 메모리에 저장된다.
- 장치 컨트롤러가 입출력장치를 연결하기 위한 하드웨어적 통로라면 장치 드라이버는 입출력장치를 연결하기 위한 소프트웨어적인 통로이다.

> #### 여기서 잠깐) 장치 드라이버를 인식하고 실행하는 주체
> - 장치 드라이버를 인식하고 실행하는 주체는 정확히 말하자면 윈도우, macOS와 같은 운영체제이다.
> - 즉, 운영체제가 장치 드라이버를 인식하고 실행할 수 있다면 그 장치는 컴퓨터 내부와 정보를 주고받을 수 있다.
> - 장치 드라이버는 운영체제가 기본으로 제공하는 것도 있지만, 장치 제작자가 따로 제공하기도 한다.
> - 물론 장치 제작자가 장치 드라이버를 따로 제공하는 경우 입출력장치는 해당 드라이버를 직접 설치해야만 사용이 가능하다.

---
