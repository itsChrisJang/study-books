#  01. HTTP 리퀘스트 메시지를 작성한다.

## 1. 이번 여행은 URL 입력부터 시작한다.
- 액세스 대상이 
  - 웹 서버라면 HTTP라는 프로토콜을 사용
  - FTP 서버라면 FTP라는 프로토콜을 사용
## 2. 브라우저는 먼저 URL을 해독한다.
- 브라우저가 맨 처음 하는 일은 웹 서버에 보내는 리퀘스트의 메시지를 작성하기 위해 URL을 해독하는 것이다.
- URL 요소
  - http://웹 서버명/디렉토리명/(...)/파일명
    - http:
      - URL의 맨 앞 앞에는 데이터 출처에 엑세스하는 방법.
      - 즉 프로토콜을 기록
    - //
      - 나중에 이어지는 문자열이 서버의 이름임을 나타냄
    - 디렉토리명/(...)/파일명
      - 데이터 출처(파일)의 경로명을 나타냄
    - ex) http://www.lab.cyber.co.kr/dir1/file1.html
      - www.lab.cyber.co.kr
        - 웹 서버명 
      - /dir1/file1.html
        - 데이터 출처(파일)의 경로명
## 3. 파일명을 생략한 경우
- http://www.lab.cyber.co.kr/dir1/
  - "/dir/" 다음에 써야 할 파일명을 쓰지 않고 생략한다는 것
  - 파일며을 쓰지 않으면 어느 파일에 엑세스해야 할 지 모르기 때문에 미리 서버측에 해당 정보를 설정해둠.
## 4. HTTP의 기본 개념
- URL 해독시 서버의 어느곳에 액세스해야 하는지가 판명된다.
- HTTP 프로토콜
  - 클라이언트와 서버가 주고받는 메시지의 내용이나 순서를 정한 것
  - 작동 방법
    1. 클라이언트에서 서버를 향해 리퀘스트 메시지를 보낸다.
       - 리퀘스트 메시지안에는 '무엇을', '어떻게 해서' 하겠다는 내용이 들어 있다.
       - '무엇을' = URI
         - 보통 페이지 데이터를 저장한 파일의 이름이나 CGI 프로그램의 파일명을 URI로 사용한다.
       - '어떻게 해서' = 메소드
         - 이 메소드에 의해서 웹 서버에 어떤 동작을 하고 싶은지를 전달한다.
       - HTTP 헤더
         - 보충 정보를 나타낸다.
    2. 리퀘스트 메시지가 웹 서버에 도착하면 웹 서버는 그 속에 쓰여있는 내용을 해독한다.
    3. URI 와 메시지를 조사하여 '무엇을', '어떻게 하는지' 판단한 후 요구에 따라 동작하고, 결과 데이터를 응답 메시지에 저장한다.
       - status code(상태 코드)
         - 응답 메시지의 맨 앞부분에는 실행 결과가 정상 종료되었는지 또는 이상이 발생했는지를 나타내는 코드가 있다.
- HTTP METHOD
  - GET
    - 보통 웹 서버에 엑세스하여 페이지의 데이터를 읽을 때 사용하는 것
    - URI로 지정한 정보를 도출
    - 파일의 경우 해당 파일의 내용을 되돌려 보내고, CGI 프로그램의 경우 해당 프로그램의 출력 데이터를 그대로 반송한다.
  - POST
    - 폼에 데이터를 사용해서 웹 서버에 송신하는 경우 
    - 클라이언트에서 서버로 데이터를 송신
    - 폼에 입력한 데이터를 송신하는 경우에 사용한다.
  - HEAD
    - GET과 거의 유사함.
    - 단 HTTP 메시지 헤더만 반송하고 데이터의 내용을 돌려보내지 않는다.
    - 파일의 최종 갱신 일시와 같은 속성 정보를 조사할 때 사용한다.
  - PUT
    - URI로 지정한 서버의 파일을 치환한다.
    - URI로 지정한 파일이 없는 경우에 새로 파일을 작성한다.
  - DELETE
    - URI로 지정한 서버의 파일을 삭제한다.
## 5. HTTP 리퀘스트 메시지를 만든다.
- URL을 해독하고 웹 서버와 파일명을 판단하면 브라우저는 이것을 바탕으로 HTTP 리퀘스트를 만든다.
- 먼저 리퀘스트 메시지의 첫 번째 행에 있는 **리퀘스트 라인**을 쓰는데 이 행에서 중요한 것은 맨 앞에 있는 메소드이다.

``` text
a. 리퀘스트 메시지

<메소드><공백><URI><공백><HTTP 버젼> - 1
<필드명>:<필드값> - 2
...            - 2
<공백 행>       - 2
<메시지 본문>     - 3
```
- 1번
  - 첫 번째 행을 **리퀘스트 라인**이라고 한다. 
  - 이 한 행을 통해서 리퀘스트의 내용을 대략적으로 알 수 있다.
- 2번
  - 이 부분을 **메시지 헤더**라고 한다.
  - 한 행에 한 개의 헤더 필드를 쓴다.
  - 이를 통해 리퀘스트의 부가적인 정보를 나타낸다.
  - 행 수는 상황에 따라 달라지며 공백 행까지가 메시지 헤더가 된다.
- 3번
  - 메시지 본문의 내용은 클라이언트에서 서버에 송신하는 데이터, 폼 페이지에 입력한 데이터를 POST로 웹 서버에 보낼 때 등에 데이터가 들어간ㄷ,
``` text
b. 응답 메시지

<HTTP 버젼><공백><스테이터스 코드><공백><응답 문구> - 1
<필드명>:<필드값>                             - 2
...                                        - 2
<공백 행>                                    - 2
<메시지 본문>                                 - 3
```
- 1번
  - 스테이터스 코드의 내용을 나타내는 짧은 설명문
- 2번
  - **메시지 헤더**
- 3번
  - 메시지 본문의 내용은 서버에서 클라이언트에 송신하는 데이터, 파일에서 읽은 데이터나 CGI 애플리케이션이 출력한 데이터가 들어간다.
  - 메시지 본문은 **바이너리 데이터**로 취급한다.

## 6. 리퀘스트 메시지를 보내면 응답이 되돌아온다.
- 응답의 경우 정상 종료했는지, 오류가 발생했는지, 즉 리퀘스트의 실행 결과를 나타내는 status code(상태 코드)와 응답 문구를 첫 번째 행에 기재 해야 한다.
- HTTP status code 개요
- 1xx
  - 처리의 경과 상황 등을 통지한다.
- 2xx
  - 정상 종료
- 3xx
  - 무언가 다른 조치가 필요함을 나타낸다.
- 4xx
  - 클라이언트측의 오류
- 5xx
  - 서버측의 오류

---
