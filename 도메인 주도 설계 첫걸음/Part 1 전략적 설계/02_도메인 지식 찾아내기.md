# Part 1. 전략적 설계
## 02. 도메인 지식 찾아내기
> 운영환경에 배포되는 것은 도메인 전문가의 지식이 아니라 개발자의 이해 혹은 오해다. - 알베르토 브랜돌리니
- 이번 장에서는 비즈니스 도메인 분석 주제를 계속해서 다루지만 좀 더 깊이 있게 하위 도메인 내부에서 일어나는 일, 즉 비즈니스 기능과 로직에 초점을 맞추고자 한다.

### 비즈니스 문제
- 우리가 개발하는 소프트웨어 시스템은 비즈니스 문제를 해결하는 솔루션이다.
  - 비즈니스 도메인의 컨텍스트에서 '문제'의 의미는 광범위 하다.
- 비즈니스 문제는 비즈니스 도메인과 하위 도메인의 모든 수준에서 발생할 수 있다.
- 하위 도메인은 세분화된 문제 도메인으로 특정 비즈니스 기능에 대한 솔루션을 제공하는 것이 목적이다.

### 도메인 지식 찾아내기
- 효과적인 소프트웨어 솔루션을 설계하려면 적어도 기본적인 비즈니스 도메인 지식이 있어야 한다.
  - 우리는 도메인 전문가가 될 필요도 없고 우리가 할 것은 도메인 전문가를 이해하고 그들이 쓰는 동일한 비즈니스 용어를 사용하는 것이다.
- 효적인 소프트웨어는 도메인 전문가가 문제를 생각하는 방식, 즉 멘탈 모델을 모방해야 한다.
- 알베르토 브랜돌리니는 소프트웨어 개발은 배우는 과정이고, 작동하는 코드는 그 부산물이라고 했다.
  - 소프트웨어 프로젝트의 성공은 도메인 전문가와 소프트웨어 엔지니어 간의 효과적인 지식 공유에 달렸다.

### 커뮤니케이션
- 프로젝트의 결과는 모든 참여자가 얼마나 잘 협력할 수 있느냐에 달려있다
  - 프로젝트와 연관된 모든 것에 대한 합의와 일치는 프로젝트의 성공에 필수다.
- 효과적인 커뮤니케이션이 지식 공유와 프로젝트 성공에 필수라는 것을 밝혀냈다.
- 전형적인 소프트웨어 개발 생애주기에서 도메인 지식은 분석 모델로 알려진 엔지니어 친화적인 형태로 변환된다.
  - 분석 모델은 도메인 지식 이면에 존재하는 비즈니스 도메인에 기반하기보다는 시스템 요구사항을 설명한 것에 지나지 않는다.
  - 모든 변환은 정보를 잃게 만든다.
  - 이런 경우, 비즈니스 문제 해결에 중요한 도메인 지식은 소프트웨어 엔지니어에게 전달되는 과정에서 손실된다.
- 이러한 문제를 해결하기 위해 도메인 주도 설계는 도메인 전문가가 소프트웨어 엔지니어에게 지식을 전달하기 위한 더 나은 방법을 제안하는데, 유비쿼터스 언어가 바로 그것이다.

### 유비쿼터스 언어란 무엇인가?
> 우리가 말하는 상식은 실제로 일반적이지 않다. - 볼테르
- 유비쿼터스 언어를 사용하는 것은 도메인 주도 설계의 초석이다.
  - 참가자들이 효과적으로 소통하기 위해 변환에 의존하지 말고 같은 언어를 사용하는 것이다.
- 유비쿼터스 언어란, 도메인 지식을 계속해서 변환하는 대신, 비즈니스 도메인을 설명하기 위한 단일화된 언어 체계를 세우고자 하는 것이다.
- 모든 프로젝트 참가자의 공통된 이해는 오직 유비쿼터스 언어와 그 용어의 지속적인 사용을 통해서만 함양될 수 있다.

### 비즈니스 언어
- 유비쿼터스 언어는 비즈니스 언어이다.
  - 그렇기 떄문에 **기술 용어는 빼고 비즈니스 도메인에 관련된 용어로 구성**해야 한다.
- 유비쿼터스 언어는 도메인 전문가의 이해와 비즈니스 도메인에 대한 멘탈 모델을 쉽게 이해할 수 있는 관점으로 표현하는 것을 목표로 한다.
#### 시나리오
- 문장은 비즈니스 도메인을 바라보는 도메인 전문가의 시각을 반영한다.
#### 일관성
- 유비쿼터스 언어는 반드시 정확하고 일관성이 있어야 한다.
  - 가정할 필요가 없어야 하고 비즈니스 도메인의 로직을 명료하게 표현해야 한다.
- 모호성이 커뮤니케이션을 방해하기 때문에 유비쿼터스 언어의 용어는 오직 하나의 의미를 가져야 한다.
  - 모호한 용어
    - 어떤 비즈니스 도메인에선느 정책이라는 용어가 규제 규칙 또는 보험 계약과 같은 여러 의미를 가진다.
      - 정확한 의미는 맥락에 따라 살마 간의 상호작용을 통해서만 알 수 있다.
    - 유비쿼터스 언어는 용어마다 단일 의미를 갖게 하기 때문에 정책의 경우 규제 규칙 과 보험 계약의 두용어를 사용하여 명확한 모델을 만들어야 한다.
  - 동의어
    - 유비쿼터스 언어에서 두 용어는 서로 바꿔 사용할 수 없다.
      - 예를 들어, 사용자라는 용어는 수많은 시스템에서 사용한다. 그러나 도메인 전문가의 언어로 신중하게 설명하면 사용자와 방문자ㅡ 관리자, 계정 등의 다른 용어가 혼용된다는 것을 발견할 수 있다.

### 비즈니스 도메인 모델
#### 모델이란 무엇인가?
> 모델이란 사물이나 현상에서 의도한 관점만 강조하고 다른 측면은 무시하여 간략히 표현한 것이다. 즉, 특정 용도를 마음에 둔 추상화의 결과다. - 레베카 워프스-브록
- 모델은 실세계의 복제가 아니라 우리가 실제 시스템을 이해하는 데 도움을 주는 인간의 창조물이다.
- 모델을 잘 설명하는 예시 중 하나는 지도다.
  - 길 안내 지도, 지형도, 세계 지도, 지하철 노선도 중 어느 것도 우리 행성의 세부적인 것을 모두 나타내지는 않는다.
  - 대신, 각 지도는 특정 목적을 지원하는 데 충분한 자료만 담고 있다.
  - 이 특정 목적이 바로 그 지도가 풀고자 하는 문제다.
#### 효과적인 모델링
- 모든 모델에는 목적이 있고 효과적인 모델은 그 목적을 달성하는 데 필요한 세부사항만 포함한다.
- 즉, 유용한 모델은 실세계의 복사본이 아니라 문제를 해결하려는 의도가 있으며, 그 목적에 필요한 정보만 제공해야 한다.
- 모델은 본질적으로 추상화의 결과다.
  - 추상화 개념은 불필요한 상세 정보를 생략하여 복잡한 문제를 다룰 수 있게 하고 당면한 문제를 푸는 데 필요한 정보만 남게 한다.
  - 반면, 비효과적인 추상화는 필요한 정보를 제거하거나 필요 없는 정보를 포함해 잡음을 유발한다.
#### 비즈니스 도메인 모델링
- 유비쿼터스 언어를 발전시키는 것은 사실상 비즈니스 도메인 모델을 구축하는 셈이다.
- 모델은 필요한 시스템을 구현하는 데, 즉 소프트웨어가 해결하고자 하는 특정 문제를 해결하는 데 필요한 만큼의 비즈니스 도메인 관점을 포함하면 된다.
#### 지속적인 노력
- 유비쿼터스 언어를 정형화하려면 언어의 소유자인 도메인 전문가와의 상호작용이 필요하다.
  - 오직 실제 도메인 전문가와의 상호작용만이 비즈니스 도메인에 대한 부정확함이나 잘못된 가정, 또는 전체적인 이해 오류를 발견할 수 있다.
- 가장 중요한 점은 유비쿼터스 언어를 발전시키는 것은 진행형이라는 것이다.
  - 지속해서 검증하고 발전시켜야 한다.
#### 도구
- 유비쿼터스 언어를 수집하고 관리하는 과정을 돕는 도구와 기술이 있따.
  - 위키는 유비쿼터스 언어를 수집하고 관리하는 용어집으로 사용될 수 있다.
- 용어집은 유스케이스 또는 거킨 테스트처럼 행동을 포착하는 데 적합한 다른 도구와 함께 사용하는 것이 좋다.
  - 거킨 언어로 작성된 자동화 테스트는 유비쿼터스 언얼르 포착하기에 좋은 언어일 뿐 아니라 도메인 전문가와 소프트웨어 엔지니어의 간극을 메우는 보조 도구로서의 역할을 할 수 있다.
- 유비쿼터스 언어의 용어의 사용을 검증할 수 있는 정적 코드 분석 도구도 있다.
#### 도전과제
- 도메인 지식을 수집하는 신뢰할 만한 유일한 방법은 도메인 전문가와 대화를 하는 것이다.
  - 대부분의 경우 가장 중요한 지식은 암묵지다.

### 결론
- 효과적인 커뮤니케이션과 지식 공유는 성공적인 소프트웨어 프로젝트에 필수다.
  - 소프트웨어 엔지니어가 소프트웨어 솔루션을 설계하고 개발하기 위해서는 반드시 비즈니스 도멩니을 이해해야 한다.
- 효과적인 커뮤니케이션을 위해서는 유비쿼터스 언어에서 반드시 모호성과 암묵적 가정을 제거해야 한다.
  - 언어의 모든 용어는 일관성이 있어야 하며 모호하지 않고 동의어가 없어야 한다.
- 유비쿼터스 언어를 육성하는 것은 지속적인 과정이다.


